<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://videotomp3-sgproject.onrender.com/">
    <meta property="og:title" content="Converter Video to MP3 Pro">
    <meta property="og:description" content="Ubah video ke MP3 dalam hitungan detik. Gratis, Aman, Tanpa Upload Server.">
    <meta property="og:image" content="https://videotomp3-sgproject.onrender.com/icon-512.png">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Converter Video to MP3 Pro">
    <meta name="twitter:description" content="Konversi video ke audio langsung di browser. Cepat & Hemat Kuota.">
    <meta name="twitter:image" content="https://videotomp3-sgproject.onrender.com/icon-512.png">
    
    <title>Converter Video to MP3 - Gratis, Cepat, Aman</title>
    <meta name="description" content="Ubah video ke MP3 secara instan tanpa upload file. Konverter aman yang berjalan di browser Anda. Gratis, tanpa batasan, dan bisa offline.">
    <meta name="keywords" content="video to mp3, converter mp3, ubah video jadi lagu, konverter gratis, video ke audio">
    <meta name="author" content="Partner Coding">
    <meta name="theme-color" content="#1a1a1a">

    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icon-192.png">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- CONFIG VARIABLES --- */
        :root {
            --bg-anim: linear-gradient(-45deg, #eef2f3, #dbe6f6, #eef2f3, #e0eafc);
            --glass-bg: rgba(255, 255, 255, 0.85); /* Lebih solid dikit biar kontras */
            --glass-border: rgba(255, 255, 255, 0.9);
            --text-main: #0f0f10; /* Lebih hitam */
            --text-sub: #4a4a4a; /* Lebih gelap dari sebelumnya (6e6e73) untuk kontras */
            --input-bg: rgba(255, 255, 255, 0.7);
            --btn-bg: #0071e3;
            --btn-text: #ffffff;
            --section-header: #1d1d1f;
            --step-badge-bg: #1d1d1f;
            --step-badge-text: #fff;
            --inverse-text: #ffffff;
            --footer-bg: rgba(255, 255, 255, 0.5);
        }

        body.dark-mode {
            --bg-anim: linear-gradient(-45deg, #0f0c29, #302b63, #24243e, #141E30);
            --glass-bg: rgba(20, 20, 20, 0.75); 
            --glass-border: rgba(255, 255, 255, 0.15); 
            --text-main: #ffffff;
            --text-sub: #d1d1d6; /* Lebih terang untuk dark mode */
            --input-bg: rgba(0, 0, 0, 0.4);
            --btn-bg: rgba(255, 255, 255, 0.15);
            --btn-text: #ffffff;
            --section-header: #f5f5f7;
            --step-badge-bg: #fff;
            --step-badge-text: #000;
            --inverse-text: #000000;
            --footer-bg: rgba(0, 0, 0, 0.3);
        }

        /* RESET & BASE */
        *, *::before, *::after { box-sizing: border-box; }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-anim); background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            min-height: 100vh; margin: 0; display: flex; flex-direction: column;
            overflow-x: hidden; color: var(--text-main);
            transition: background 0.5s ease, color 0.5s ease;
        }

        /* MENINGKATKAN AKSESIBILITAS LINK */
        a { color: inherit; }
        a:focus, button:focus, input:focus {
            outline: 2px solid #0071e3;
            outline-offset: 2px;
        }

        @keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

        /* THEME TOGGLE */
        .theme-toggle { 
            position: fixed; top: 20px; right: 20px; 
            width: 48px; height: 48px; min-width: 48px; min-height: 48px; /* Diperbesar dikit buat jari */
            background: var(--glass-bg); 
            border: 1px solid var(--glass-border); 
            border-radius: 50%; cursor: pointer; font-size: 20px; 
            color: var(--text-main); z-index: 9999; 
            backdrop-filter: blur(10px); 
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            transition: 0.3s;
        }
        .theme-toggle:hover { transform: scale(1.1); }
        .theme-toggle:active { transform: scale(0.9); }

        /* MAIN LAYOUT */
        .page-wrapper {
            flex: 1; display: flex; flex-direction: column; align-items: center;
            padding: 80px 20px 40px 20px; 
            gap: 70px; max-width: 1000px; margin: 0 auto; width: 100%;
        }

        /* HERO CARD */
        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(40px); -webkit-backdrop-filter: blur(40px);
            border: 1px solid var(--glass-border);
            border-radius: 30px; padding: 40px;
            width: 100%; max-width: 450px; text-align: center;
            box-shadow: 0 20px 50px rgba(0,0,0,0.2);
            position: relative; z-index: 2; transition: 0.5s;
        }
        
        h1 {
            font-weight: 800; font-size: 26px; margin: 0; letter-spacing: -0.5px;
            background: linear-gradient(135deg, var(--text-main) 30%, var(--text-sub));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            /* Fallback untuk browser lama */
            color: var(--text-main);
        }
        .subtitle { color: var(--text-sub); font-size: 15px; margin-top: 8px; margin-bottom: 30px; line-height: 1.5; }
        .icon-3d { font-size: 50px; margin-bottom: 15px; display: inline-block; animation: floatIcon 4s ease-in-out infinite; }
        @keyframes floatIcon { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-8px); } }

        /* INPUT GLOW */
        .input-glass { 
            background: var(--input-bg); 
            border: 1px solid var(--glass-border); 
            border-radius: 16px; padding: 15px; margin-bottom: 20px;
            animation: glowPulse 3s infinite alternate;
        }
        @keyframes glowPulse {
            0% { border-color: rgba(255, 255, 255, 0.2); box-shadow: 0 0 5px rgba(0, 113, 227, 0.0); }
            100% { border-color: #0071e3; box-shadow: 0 0 20px rgba(0, 113, 227, 0.4); }
        }

        /* Label for accessibility (Hidden visually but readable by screen readers) */
        .sr-only {
            position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px;
            overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border-width: 0;
        }

        input[type="file"] { width: 100%; color: var(--text-sub); font-size: 13px; }
        input[type="file"]::file-selector-button {
            border: none; background: rgba(128, 128, 128, 0.2); color: var(--text-main);
            font-weight: 600; padding: 8px 16px; border-radius: 8px; margin-right: 15px; cursor: pointer;
        }

        .btn-glass {
            background: var(--btn-bg); color: var(--btn-text); border: 1px solid rgba(255,255,255,0.1);
            padding: 16px; border-radius: 50px; font-size: 16px; font-weight: 600; cursor: pointer;
            width: 100%; backdrop-filter: blur(10px); transition: 0.3s;
        }
        .btn-glass:hover { transform: scale(1.02); filter: brightness(1.1); }

        /* --- SECTIONS --- */
        .section-header { text-align: center; margin-bottom: 30px; position: relative; width: 100%; }
        .section-title {
            font-size: 13px; font-weight: 800; text-transform: uppercase; letter-spacing: 1px;
            color: var(--section-header); border-bottom: 2px solid var(--text-sub);
            padding-bottom: 5px; display: inline-block;
        }

        /* GRID & CARDS */
        .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; width: 100%; }
        .feature-card {
            background: var(--glass-bg); backdrop-filter: blur(20px); border: 1px solid var(--glass-border);
            padding: 25px; border-radius: 20px; text-align: left; transition: 0.5s;
        }
        .f-icon { font-size: 24px; margin-bottom: 12px; display: block; }
        .f-title { font-weight: 700; font-size: 15px; margin-bottom: 6px; color: var(--text-main); }
        .f-desc { font-size: 13px; color: var(--text-sub); line-height: 1.6; }

        .steps-container { display: flex; gap: 15px; flex-wrap: wrap; width: 100%; }
        .step-item {
            flex: 1; min-width: 250px;
            background: var(--glass-bg); border: 1px solid var(--glass-border);
            padding: 25px 20px; border-radius: 18px; transition: 0.5s;
            display: flex; flex-direction: column; align-items: flex-start; gap: 10px;
        }
        .step-badge {
            font-size: 11px; font-weight: 800; text-transform: uppercase; letter-spacing: 0.5px;
            background: var(--step-badge-bg); color: var(--step-badge-text);
            padding: 5px 10px; border-radius: 4px;
        }
        .step-text { font-size: 14px; color: var(--text-main); font-weight: 500; line-height: 1.5; }

        /* --- MEGA FOOTER --- */
        footer { 
            padding: 60px 20px 30px 20px; margin-top: auto; 
            border-top: 1px solid var(--glass-border); width: 100%; 
            background: var(--footer-bg); font-family: 'Plus Jakarta Sans', sans-serif;
            box-sizing: border-box; backdrop-filter: blur(10px); transition: 0.5s;
        }

        .footer-grid {
            max-width: 1000px; margin: 0 auto; display: grid;
            grid-template-columns: repeat(3, 1fr); gap: 40px;
            text-align: left; margin-bottom: 40px;
        }

        .f-col h4 {
            font-size: 13px; font-weight: 800; color: var(--text-main);
            margin-bottom: 20px; text-transform: uppercase; letter-spacing: 1px;
        }

        .f-links { display: flex; flex-direction: column; gap: 12px; }
        .f-link {
            font-size: 13px; color: var(--text-sub); text-decoration: none; transition: 0.3s;
            font-weight: 500; display: block;
        }
        .f-link:hover { color: #0071e3; transform: translateX(5px); }

        .status-badge {
            display: inline-flex; align-items: center; gap: 8px;
            background: rgba(48, 209, 88, 0.1); border: 1px solid rgba(48, 209, 88, 0.3);
            padding: 6px 12px; border-radius: 50px;
            font-size: 11px; font-weight: 700; color: #30d158; margin-bottom: 15px;
        }
        .dot { width: 8px; height: 8px; background: #30d158; border-radius: 50%; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.4; } 100% { opacity: 1; } }
        
        .live-stat { font-size: 12px; color: var(--text-sub); display: flex; align-items: center; gap: 6px; margin-bottom: 5px; }
        .live-num { font-weight: 700; color: var(--text-main); }

        .footer-bottom {
            max-width: 1000px; margin: 0 auto;
            border-top: 1px solid var(--glass-border); padding-top: 30px;
            display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; gap: 15px;
        }
        .copyright { font-size: 12px; color: var(--text-sub); font-weight: 500; }
        .credits { font-size: 12px; color: var(--text-main); font-weight: 500; }
        .partner-bold { font-weight: 800; color: var(--text-main); }
        .heart { color: #e25555; display: inline-block; animation: beat 1.5s infinite; }

        @media (max-width: 768px) {
            .footer-grid { grid-template-columns: 1fr; gap: 40px; }
            .footer-bottom { flex-direction: column; text-align: center; }
            .steps-container { flex-direction: column; }
        }

        /* Utils */
        .loader { width: 30px; height: 30px; margin: 20px auto; border: 3px solid rgba(255,255,255,0.1); border-top-color: var(--text-main); border-radius: 50%; animation: spin 1s infinite; display: none; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .success-holo { margin-top: 20px; padding: 15px; border-radius: 16px; background: rgba(48, 209, 88, 0.1); border: 1px solid rgba(48, 209, 88, 0.3); text-align: center; }
        .action-row { display: flex; gap: 10px; margin-top: 10px; }
        .mini-btn { flex: 1; padding: 10px; border-radius: 10px; font-size: 13px; font-weight: 600; text-decoration: none; cursor: pointer; border: none; }
        .dl-btn { background: var(--text-main); color: var(--inverse-text); } 
        .sh-btn { background: rgba(128,128,128,0.2); color: var(--text-main); }
        #toast { visibility: hidden; min-width: 150px; background: rgba(20,20,20,0.8); color: white; border-radius: 50px; padding: 10px 20px; position: fixed; top: 30px; left: 50%; transform: translateX(-50%); z-index: 100; font-size: 12px; opacity: 0; transition: 0.4s; }
        #toast.show { visibility: visible; opacity: 1; top: 80px; }
    </style>
    
    <script src="https://unpkg.com/@ffmpeg/ffmpeg@0.11.6/dist/ffmpeg.min.js"></script>
</head>
<body class="dark-mode">

    <button class="theme-toggle" id="themeBtn" onclick="toggleTheme()" aria-label="Ganti Tema">‚òÄ</button>
    
    <div id="toast" role="alert">Notifikasi</div>

    <div class="page-wrapper">
        
        <main class="glass-card">
            <div class="icon-3d" aria-hidden="true">üíø</div>
            <h1>Converter Video to MP3</h1>
            <p class="subtitle">Ubah video ke audio tanpa upload. Aman & Privat.</p>

            <div class="input-glass">
                <label for="uploader" class="sr-only">Pilih File Video</label>
                <input type="file" id="uploader" accept="video/*" aria-label="Upload Video">
            </div>

            <button id="convertBtn" class="btn-glass" onclick="convert()">Konversi File</button>

            <div id="loader" class="loader" role="status" aria-label="Loading"></div>
            <p id="status-text" style="margin-top:15px; font-size:12px; color:var(--text-sub)" aria-live="polite"></p>
            <div id="output-area"></div>
        </main>

        <section style="width: 100%;">
            <div class="section-header"><span class="section-title">CARA PENGGUNAAN</span></div>
            <div class="steps-container">
                <div class="step-item">
                    <span class="step-badge">LANGKAH 01</span>
                    <span class="step-text">Pilih file video yang ingin diubah dari galeri HP atau Laptop.</span>
                </div>
                <div class="step-item">
                    <span class="step-badge">LANGKAH 02</span>
                    <span class="step-text">Klik tombol konversi dan tunggu proses ekstraksi audio.</span>
                </div>
                <div class="step-item">
                    <span class="step-badge">LANGKAH 03</span>
                    <span class="step-text">Unduh file MP3 hasilnya atau bagikan langsung.</span>
                </div>
            </div>
        </section>

        <section style="width: 100%;">
            <div class="section-header"><span class="section-title">KEUNGGULAN SISTEM</span></div>
            <div class="features-grid">
                <div class="feature-card">
                    <span class="f-icon" aria-hidden="true">üîí</span>
                    <div class="f-title">PRIVASI TOTAL</div>
                    <div class="f-desc">File diproses di RAM perangkatmu. Tidak ada data yang dikirim ke server luar.</div>
                </div>
                <div class="feature-card">
                    <span class="f-icon" aria-hidden="true">‚ö°</span>
                    <div class="f-title">PERFORMA LOKAL</div>
                    <div class="f-desc">Menggunakan teknologi WebAssembly untuk kecepatan setara aplikasi desktop.</div>
                </div>
                <div class="feature-card">
                    <span class="f-icon" aria-hidden="true">üì±</span>
                    <div class="f-title">PWA READY</div>
                    <div class="f-desc">Instal sebagai aplikasi di Android & iOS. Bisa berjalan tanpa internet.</div>
                </div>
            </div>
        </section>

    </div>

    <footer>
        <div class="footer-grid">
            
            <div class="f-col">
                <h4>Converter Pro</h4>
                <div class="status-badge">
                    <span class="dot"></span> All Systems Operational
                </div>
                <div class="live-stat">
                    <span aria-hidden="true">üë•</span> <span class="live-num" id="visitorCount">...</span> Pengguna Online
                </div>
                <div class="live-stat">
                    <span aria-hidden="true">‚ö°</span> <span class="live-num">v2.4.0</span> (Stable Build)
                </div>
            </div>

            <div class="f-col">
                <h4>Legal & Info</h4>
                <div class="f-links">
                    <a href="privacy.html" class="f-link">Kebijakan Privasi</a>
                    <a href="terms.html" class="f-link">Syarat & Ketentuan</a>
                    <a href="terms.html#copyright" class="f-link">Penafian Hak Cipta</a>
                    <a href="terms.html#security" class="f-link">Keamanan & Teknologi</a>
                </div>
            </div>

            <div class="f-col">
                <h4>Pusat Bantuan</h4>
                <div class="f-links">
                    <a href="faq.html" class="f-link">FAQ (Tanya Jawab)</a>
                    <a href="mailto:emailmu@gmail.com?subject=Laporan Bug" class="f-link">Laporkan Bug</a>
                    <a href="faq.html" class="f-link">Panduan Penggunaan</a>
                    <a href="mailto:emailmu@gmail.com?subject=Halo Dev" class="f-link">Kontak Developer</a>
                </div>
            </div>

        </div>

        <div class="footer-bottom">
            <div class="copyright">
                &copy; <span id="year"></span> Converter Video to MP3 Pro. All rights reserved.
            </div>
            <div class="credits">
                Made with <span class="heart" aria-hidden="true">‚ù§</span> by <span class="partner-bold">Partner Coding</span>
            </div>
        </div>
    </footer>

    <script>
        // LOGIKA THEME (Fixed & Smooth)
        const themeBtn = document.getElementById('themeBtn');
        const body = document.body;
        
        if (localStorage.getItem('theme') === 'light') { disableDarkMode(); }

        function toggleTheme() {
            body.classList.contains('dark-mode') ? 
            (disableDarkMode(), showToast("Light Theme Active")) : 
            (enableDarkMode(), showToast("Dark Theme Active"));
        }

        function enableDarkMode() {
            body.classList.add('dark-mode');
            themeBtn.innerText = "‚òÄ";
            localStorage.setItem('theme', 'dark');
        }

        function disableDarkMode() {
            body.classList.remove('dark-mode');
            themeBtn.innerText = "üåô";
            localStorage.setItem('theme', 'light');
        }

        function showToast(msg) { 
            const t = document.getElementById('toast'); 
            t.innerText = msg; t.className = "show"; 
            setTimeout(() => t.className = t.className.replace("show", ""), 3000); 
        }

        // LOGIKA LAINNYA
        if ('serviceWorker' in navigator) { window.addEventListener('load', () => navigator.serviceWorker.register('./sw.js')); }
        document.getElementById('year').innerText = new Date().getFullYear();

        // Counter Realistis (10-20)
        function updateVisitorCount() {
            const min = 10, max = 20;
            const total = Math.floor(Math.random() * (max - min + 1)) + min;
            document.getElementById('visitorCount').innerText = total;
        }
        updateVisitorCount(); setInterval(updateVisitorCount, 5000);

        // CONVERTER LOGIC
        const { createFFmpeg, fetchFile } = FFmpeg;
        const ffmpeg = createFFmpeg({ log: true, corePath: 'https://unpkg.com/@ffmpeg/core-st@0.11.1/dist/ffmpeg-core.js', mainName: 'main' });
        const statusText = document.getElementById('status-text');
        const outputArea = document.getElementById('output-area');
        const convertBtn = document.getElementById('convertBtn');
        const loader = document.getElementById('loader');
        let finalMp3Blob = null;

        const convert = async () => {
            const uploader = document.getElementById('uploader');
            const files = uploader.files;
            
            if (files.length === 0) { showToast("‚ö†Ô∏è Pilih file dulu"); return; }
            if (!files[0].type.startsWith('video/')) { showToast("‚õî Bukan video!"); return; }
            
            statusText.innerText = "Processing..."; outputArea.innerHTML = "";
            convertBtn.disabled = true; convertBtn.style.opacity = "0.5"; loader.style.display = "block";

            try {
                if (!ffmpeg.isLoaded()) await ffmpeg.load();
                ffmpeg.FS('writeFile', 'input', await fetchFile(files[0]));
                await ffmpeg.run('-i', 'input', 'output.mp3');
                
                const data = ffmpeg.FS('readFile', 'output.mp3');
                finalMp3Blob = new Blob([data.buffer], { type: 'audio/mp3' });
                const url = URL.createObjectURL(finalMp3Blob);
                
                outputArea.innerHTML = `
                    <div class="success-holo">
                        <div style="font-weight:600; margin-bottom:5px">Selesai</div>
                        <div class="action-row">
                            <a href="${url}" download="Audio.mp3" class="mini-btn dl-btn">‚¨á Download MP3</a>
                            <button onclick="shareFile()" class="mini-btn sh-btn" id="shareBtn" aria-label="Share File">üîó Share</button>
                        </div>
                    </div>`;
                loader.style.display = "none"; statusText.innerText = "";
                if (!navigator.canShare) document.getElementById('shareBtn').style.display = 'none';
            } catch (e) {
                console.error(e); loader.style.display = "none"; statusText.innerText = "Gagal.";
            }
            convertBtn.disabled = false; convertBtn.style.opacity = "1";
        };

        async function shareFile() {
            if (!finalMp3Blob) return;
            const file = new File([finalMp3Blob], "audio.mp3", { type: "audio/mp3" });
            if (navigator.canShare) navigator.share({ files: [file], title: 'Audio' });
        }
    </script>
</body>
</html>